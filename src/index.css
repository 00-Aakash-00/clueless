@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== APPLE SQUIRCLE DESIGN SYSTEM ===== */
/*
 * Following Apple's "closer to the human, the rounder it is" principle
 * Target: iPhone-like roundness (31-34%) for this interactive overlay app
 * Superellipse formula: |x/a|^n + |y/b|^n = 1 where nâ‰ˆ5 creates squircle
 */

:root {
	/* Squircle smoothing factor (Apple uses ~0.6) */
	--squircle-smooth: 0.6;

	/* Roundness scale based on Apple's formula */
	--radius-xs: 4px; /* Inline code, tiny elements */
	--radius-sm: 8px; /* Code blocks, tables */
	--radius-md: 12px; /* Buttons, inputs, chat messages */
	--radius-lg: 16px; /* Cards, primary containers */
	--radius-xl: 20px; /* Glass-card, main surfaces */
	--radius-2xl: 24px; /* Hero elements, modals */
	--radius-full: 9999px; /* Pills, circular icons */
}

/* Squircle size variant classes */
.squircle-xs {
	border-radius: var(--radius-xs);
}
.squircle-sm {
	border-radius: var(--radius-sm);
}
.squircle-md {
	border-radius: var(--radius-md);
}
.squircle-lg {
	border-radius: var(--radius-lg);
}
.squircle-xl {
	border-radius: var(--radius-xl);
}
.squircle-2xl {
	border-radius: var(--radius-2xl);
}

/* Liquid Glass Effect Base */
.liquid-glass {
	background: rgba(255, 255, 255, 0.25);
	backdrop-filter: blur(16px) saturate(180%) brightness(120%);
	-webkit-backdrop-filter: blur(16px) saturate(180%) brightness(120%);
	border: 2px solid rgba(255, 255, 255, 0.3);
	border-radius: var(--radius-lg);
	box-shadow:
		0 8px 32px rgba(0, 0, 0, 0.2),
		inset 0 1px 0 rgba(255, 255, 255, 0.3),
		inset 0 -1px 0 rgba(0, 0, 0, 0.1);
	position: relative;
	overflow: hidden;
}

/* Static top highlight instead of shimmer animation */
.liquid-glass::before {
	content: "";
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 1px;
	background: linear-gradient(
		90deg,
		transparent,
		rgba(255, 255, 255, 0.6),
		transparent
	);
	pointer-events: none;
}

/* Fallback for browsers without backdrop-filter support */
@supports not (backdrop-filter: blur()) {
	.liquid-glass {
		background: rgba(255, 255, 255, 0.5);
		border: 2px solid rgba(255, 255, 255, 0.6);
	}
}

/* Add a subtle outline to ensure visibility */
.liquid-glass:before {
	outline: 1px solid rgba(255, 255, 255, 0.1);
	outline-offset: -1px;
}

.draggable-area {
	-webkit-app-region: drag;
	cursor: move;
}

.drag-region {
	-webkit-app-region: drag;
	cursor: move;
}

/* Make sure buttons and interactive elements are not draggable */
button,
input,
select,
textarea,
.interactive {
	-webkit-app-region: no-drag;
}

/* Override for the liquid glass bar - make it draggable */
.liquid-glass.draggable-area {
	-webkit-app-region: drag;
	cursor: move;
}

/* But keep buttons inside clickable */
.liquid-glass.draggable-area button {
	-webkit-app-region: no-drag;
	cursor: pointer;
}

/* Dark theme liquid glass variant */
.liquid-glass-dark {
	background: rgba(0, 0, 0, 0.2);
	backdrop-filter: blur(16px) saturate(180%) brightness(80%);
	-webkit-backdrop-filter: blur(16px) saturate(180%) brightness(80%);
	border: 1px solid rgba(255, 255, 255, 0.1);
	box-shadow:
		0 8px 32px rgba(0, 0, 0, 0.3),
		inset 0 1px 0 rgba(255, 255, 255, 0.1),
		inset 0 -1px 0 rgba(0, 0, 0, 0.2);
}

/* Ensure content is not blurred */
.glass-content {
	position: relative;
	z-index: 1;
	backdrop-filter: none;
	-webkit-backdrop-filter: none;
}

/* Chat container specific styling */
.liquid-glass.chat-container {
	min-height: auto;
	height: auto;
	background: rgba(255, 255, 255, 0.15);
	backdrop-filter: blur(20px) saturate(200%) brightness(110%);
	-webkit-backdrop-filter: blur(20px) saturate(200%) brightness(110%);
	border: 1px solid rgba(255, 255, 255, 0.25);
	box-shadow:
		0 12px 40px rgba(0, 0, 0, 0.15),
		inset 0 1px 0 rgba(255, 255, 255, 0.2),
		inset 0 -1px 0 rgba(0, 0, 0, 0.05);
}

/* Thin bar variant of liquid glass - for command bar */
.liquid-glass-bar {
	background: rgba(255, 255, 255, 0.25);
	backdrop-filter: blur(16px) saturate(180%) brightness(120%);
	-webkit-backdrop-filter: blur(16px) saturate(180%) brightness(120%);
	border: 2px solid rgba(255, 255, 255, 0.3);
	border-radius: var(--radius-lg);
	box-shadow:
		0 8px 32px rgba(0, 0, 0, 0.2),
		inset 0 1px 0 rgba(255, 255, 255, 0.3),
		inset 0 -1px 0 rgba(0, 0, 0, 0.1);
	position: relative;
	overflow: hidden;
	height: 32px;
	min-height: 32px;
	max-height: 32px;
}

/* Static top highlight for bar variant */
.liquid-glass-bar::before {
	content: "";
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 1px;
	background: linear-gradient(
		90deg,
		transparent,
		rgba(255, 255, 255, 0.6),
		transparent
	);
	pointer-events: none;
}

/* ===== NEW GLASS CARD STYLES ===== */

/* Glass card with tint for visibility */
.glass-card {
	background: rgba(255, 255, 255, 0.12);
	border-radius: var(--radius-xl);
	border: 1px solid rgba(255, 255, 255, 0.35);
	box-shadow:
		0 8px 32px rgba(0, 0, 0, 0.15),
		inset 0 1px 0 rgba(255, 255, 255, 0.5),
		inset 0 -1px 0 rgba(255, 255, 255, 0.1),
		inset 0 0 60px 30px rgba(255, 255, 255, 0.08);
	backdrop-filter: blur(12px);
	-webkit-backdrop-filter: blur(12px);
	position: relative;
	overflow: hidden;
}

.glass-card::before {
	content: "";
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 1px;
	background: linear-gradient(
		90deg,
		transparent,
		rgba(255, 255, 255, 0.8),
		transparent
	);
	pointer-events: none;
}

.glass-card::after {
	content: "";
	position: absolute;
	top: 0;
	left: 0;
	width: 1px;
	height: 100%;
	background: linear-gradient(
		180deg,
		rgba(255, 255, 255, 0.8),
		transparent,
		rgba(255, 255, 255, 0.3)
	);
	pointer-events: none;
}

/* Dark tinted variant for better text contrast */
.glass-card-dark {
	background: rgba(30, 30, 40, 0.75);
	border-radius: var(--radius-xl);
	border: 1px solid rgba(255, 255, 255, 0.15);
	box-shadow:
		0 8px 32px rgba(0, 0, 0, 0.3),
		inset 0 1px 0 rgba(255, 255, 255, 0.1);
	backdrop-filter: blur(16px);
	-webkit-backdrop-filter: blur(16px);
	position: relative;
	overflow: hidden;
	color: rgba(255, 255, 255, 0.92);
}

/* Light tinted variant */
.glass-card-light {
	background: rgba(255, 255, 255, 0.25);
	border-radius: var(--radius-lg);
	border: 1px solid rgba(255, 255, 255, 0.4);
	backdrop-filter: blur(12px);
	-webkit-backdrop-filter: blur(12px);
}

/* ===== CHAT MESSAGE STYLES ===== */

.chat-message-user {
	background: rgba(59, 130, 246, 0.55);
	color: white;
	border-radius: var(--radius-md);
	border: 1px solid rgba(59, 130, 246, 0.3);
	backdrop-filter: blur(8px);
	-webkit-backdrop-filter: blur(8px);
}

.chat-message-assistant {
	background: rgba(255, 255, 255, 0.45);
	color: rgba(30, 30, 40, 0.95);
	border-radius: var(--radius-md);
	border: 1px solid rgba(255, 255, 255, 0.3);
	backdrop-filter: blur(8px);
	-webkit-backdrop-filter: blur(8px);
}

/* ===== MARKDOWN/PROSE STYLES FOR GLASS ===== */

.prose-glass {
	color: inherit;
}

.prose-glass h1,
.prose-glass h2,
.prose-glass h3 {
	color: rgba(255, 255, 255, 0.98);
	font-weight: 600;
	margin-top: 1em;
	margin-bottom: 0.5em;
}

.prose-glass h1 {
	font-size: 1.5em;
}
.prose-glass h2 {
	font-size: 1.25em;
}
.prose-glass h3 {
	font-size: 1.1em;
}

.prose-glass p {
	color: rgba(255, 255, 255, 0.9);
	line-height: 1.6;
	margin-bottom: 0.75em;
}

.prose-glass ul,
.prose-glass ol {
	padding-left: 1.5em;
	margin-bottom: 0.75em;
}

.prose-glass li {
	color: rgba(255, 255, 255, 0.9);
	margin-bottom: 0.25em;
}

.prose-glass code {
	background: rgba(0, 0, 0, 0.3);
	padding: 0.2em 0.4em;
	border-radius: var(--radius-xs);
	font-size: 0.9em;
	font-family: "SF Mono", "Monaco", "Menlo", monospace;
}

.prose-glass pre {
	background: rgba(0, 0, 0, 0.4);
	border-radius: var(--radius-sm);
	padding: 1em;
	overflow-x: auto;
	margin-bottom: 1em;
}

.prose-glass pre code {
	background: transparent;
	padding: 0;
}

.prose-glass a {
	color: rgba(147, 197, 253, 1);
	text-decoration: underline;
}

.prose-glass a:hover {
	color: rgba(191, 219, 254, 1);
}

.prose-glass blockquote {
	border-left: 3px solid rgba(255, 255, 255, 0.3);
	padding-left: 1em;
	margin-left: 0;
	color: rgba(255, 255, 255, 0.8);
	font-style: italic;
}

.prose-glass strong {
	font-weight: 600;
	color: rgba(255, 255, 255, 0.98);
}

/* Table styles for prose-glass */
.prose-glass table {
	width: 100%;
	border-collapse: collapse;
	border-radius: var(--radius-sm);
	overflow: hidden;
	background: rgba(0, 0, 0, 0.15);
	margin: 0.75em 0;
}

.prose-glass th {
	background: rgba(0, 0, 0, 0.2);
	padding: 0.75em 1em;
	text-align: left;
	font-weight: 600;
	border-bottom: 1px solid rgba(255, 255, 255, 0.15);
	color: rgba(255, 255, 255, 0.95);
}

.prose-glass td {
	padding: 0.75em 1em;
	border-bottom: 1px solid rgba(255, 255, 255, 0.08);
	color: rgba(255, 255, 255, 0.85);
}

.prose-glass tr:last-child td {
	border-bottom: none;
}

.prose-glass tr:hover {
	background: rgba(255, 255, 255, 0.05);
}

/* Dark prose variant for light backgrounds */
.prose-dark {
	color: rgba(30, 30, 40, 0.95);
}

.prose-dark h1,
.prose-dark h2,
.prose-dark h3 {
	color: rgba(30, 30, 40, 0.98);
}

.prose-dark p,
.prose-dark li {
	color: rgba(30, 30, 40, 0.9);
}

.prose-dark code {
	background: rgba(0, 0, 0, 0.1);
}

.prose-dark a {
	color: rgba(59, 130, 246, 1);
}

/* Table styles for prose-dark */
.prose-dark table {
	width: 100%;
	border-collapse: collapse;
	border-radius: var(--radius-sm);
	overflow: hidden;
	background: rgba(0, 0, 0, 0.05);
	border: 1px solid rgba(0, 0, 0, 0.1);
	margin: 0.75em 0;
}

.prose-dark th {
	background: rgba(0, 0, 0, 0.08);
	padding: 0.75em 1em;
	text-align: left;
	font-weight: 600;
	border-bottom: 1px solid rgba(0, 0, 0, 0.15);
	color: rgba(30, 30, 40, 0.95);
}

.prose-dark td {
	padding: 0.75em 1em;
	border-bottom: 1px solid rgba(0, 0, 0, 0.05);
	color: rgba(30, 30, 40, 0.85);
}

.prose-dark tr:last-child td {
	border-bottom: none;
}

.prose-dark tr:hover {
	background: rgba(0, 0, 0, 0.03);
}

/* ===== LOADING INDICATOR (NON-PULSING) ===== */

.loading-dots {
	display: inline-flex;
	gap: 4px;
}

.loading-dots span {
	opacity: 0.6;
}

.loading-dots span:nth-child(1) {
	opacity: 0.4;
}
.loading-dots span:nth-child(2) {
	opacity: 0.6;
}
.loading-dots span:nth-child(3) {
	opacity: 0.8;
}

/* ===== KEYBOARD KEY STYLES ===== */

.kbd {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	background: rgba(255, 255, 255, 0.1);
	border: 1px solid rgba(255, 255, 255, 0.2);
	border-radius: var(--radius-xs);
	padding: 2px 6px;
	font-family: "SF Mono", "Monaco", "Menlo", monospace;
	font-size: 11px;
	color: rgba(255, 255, 255, 0.9);
	min-width: 20px;
	text-align: center;
}
